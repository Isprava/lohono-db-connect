# ═══════════════════════════════════════════════════════════════════════════
# Lohono AI — Environment Configuration
# ═══════════════════════════════════════════════════════════════════════════
# Copy this file to .env and fill in the required values.
#   cp .env.example .env
#
# Required vars are marked with (REQUIRED). Everything else has defaults.
# ═══════════════════════════════════════════════════════════════════════════

# ── PostgreSQL ────────────────────────────────────────────────────────────
# Shared by: postgres container, mcp-server, mcp-client (auth staff check)
# For production: set DB_HOST to your external database hostname
DB_HOST=postgres                                # 'postgres' for local Docker, external host for production
DB_PORT=5432                                    # Internal PG port (5432 for Docker or external DB)
DB_USER=lohono_api
DB_PASSWORD=lohono_api_password                 # (REQUIRED) change in production
DB_NAME=lohono_api_production
DB_EXTERNAL_PORT=5433                           # Host port for direct PG access (local dev only)

# ── MongoDB ───────────────────────────────────────────────────────────────
# Shared by: mongo container, mcp-client
MONGO_PORT=27017                                # Host port for direct Mongo access
MONGODB_DB_NAME=mcp_client

# ── MCP Server ────────────────────────────────────────────────────────────
MCP_PORT=3000                                   # Host port for MCP SSE server

# Redash integration (optional)
REDASH_URL=https://redash.isprava.com
REDASH_API_KEY=

# ACL enforcement (optional)
MCP_USER_EMAIL=                                 # Fallback email for stdio mode

# ── MCP Client (Claude-powered backend API) ───────────────────────────────
ANTHROPIC_API_KEY=                              # (REQUIRED) Claude API key
CLAUDE_MODEL=claude-sonnet-4-5-20250929
CLIENT_PORT=3001                                # Host port for client REST API

# ── Web Frontend ───────────────────────────────────────────────────────
WEB_PORT=8080                                   # Host port for web UI

# Deployment mode: 'local' or 'production'
# - local: Web dev server proxies /api to CLIENT_PORT (for development)
# - production: nginx proxies both web and API (for AWS/production)
DEPLOYMENT_MODE=local

# Public domain (for production only)
PUBLIC_DOMAIN=ailabs.lohono.com                # Used when DEPLOYMENT_MODE=production

# Auth redirect goes to http://localhost:${WEB_PORT}/auth/callback (local)
# Or https://${PUBLIC_DOMAIN}/auth/callback (production)
# auth.lohono.com allows localhost:8080, *.lohono.com, *.isprava.com

# ── Observability (OpenTelemetry + SigNoz) ───────────────────────────────
OTEL_SDK_DISABLED=true                                  # Set to false when running `make obs-up`
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4317  # OTel Collector gRPC endpoint
OTEL_GRPC_PORT=4317                             # Host port for OTel gRPC
OTEL_HTTP_PORT=4318                             # Host port for OTel HTTP
SIGNOZ_PORT=3301                                # Host port for SigNoz UI
LOG_LEVEL=info                                  # Log level: debug, info, warn, error
NODE_ENV=production                             # Environment tag for traces
# OTEL_LOG_LEVEL=debug                          # Uncomment for OTel SDK debug logs
